<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RISC-V VHDL: System-on-Chip: Registers</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">RISC-V VHDL: System-on-Chip
   &#160;<span id="projectnumber">2.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Registers</div>  </div>
</div><!--header-->
<div class="contents">
<p>SoC peripheries registers offsets.</p>
<p><a class="el" href="group__cfg__generic__group.html">Generic parameters</a></p>
<p><a class="el" href="sim_tb_link.html">Top-level simulation</a></p>
<p><a class="el" href="group__registers__group.html">Debug Support Unit (DSU)</a></p>
<p><a class="el" href="eth_link.html">Ethernet setup</a></p>
<p><a class="el" href="sw_debugger_api_link.html">SW Debugger API</a></p>
<p>Information about GNSS (<em>Satellite Navigation Engine</em>) you can find at <a class="el" href="">www.gnss-sensor.com.</a> </p>


<h3><a id="dsu_link"></a>Debug Support Unit (DSU)</h3><div class="textblock"><h1><a class="anchor" id="dsu_overview"></a>
Overview</h1>
<p>Debug Support Unit (DSU) was developed to interact with "RIVER" CPU via its debug port interace. This bus provides access to all internal CPU registers and states and may be additionally extended by request. Run control functionality like 'run', 'halt', 'step' or 'breakpoints' imlemented using proprietary algorithms and intend to simplify integration with debugger application.</p>
<p>Set of general registers and control registers (CSR) are described in RISC-V privileged ISA specification and also available for read and write access via debug port.</p>
<dl class="section note"><dt>Note</dt><dd>Take into account that CPU can have any number of platform specific CSRs that usually not entirely documented.</dd></dl>
<h1><a class="anchor" id="dsu_regs"></a>
DSU registers mapping</h1>
<p>DSU acts like a slave AMBA AXI4 device that is directly mapped into physical memory. Default address location for our implementation is 0x80020000. DSU directly transforms device offset address into one of regions of the debug port: </p><ul>
<li>
<b>0x00000..0x08000 (Region 1):</b> CSR registers. </li>
<li>
<b>0x08000..0x10000 (Region 2):</b>General set of registers. </li>
<li>
<b>0x10000..0x18000 (Region 3):</b> Run control and debug support registers. </li>
<li>
<b>0x18000..0x20000 (Region 4):</b> Local DSU region that doesn't access CPU debug port. </li>
</ul>
<dl class="section user"><dt>Example:</dt><dd>Bus transaction at address <em>0x80023C10</em> will be redirected to Debug port with CSR index <em>0x782</em>.</dd></dl>
<h2><a class="anchor" id="dsu_csr"></a>
CSR Region (32 KB)</h2>
<dl class="section user"><dt>User mode exception program counter (0x00208)</dt><dd></dd></dl>
<table class="doxtable">
<tr>
<th align="center">Bits</th><th align="center">Type</th><th align="center">Reset </th><th align="center">Name </th><th>Definition  </th></tr>
<tr>
<td align="center">64 </td><td align="center">RO </td><td align="center">64h'0 </td><td align="center"><code>CSR_UEPC</code> </td><td><b>User mode exception program counter</b>.<br />
ISA offset 0x041. </td></tr>
</table>
<dl class="section user"><dt>User mode exception program counter (0x01A08)</dt><dd></dd></dl>
<table class="doxtable">
<tr>
<th align="center">Bits</th><th align="center">Type</th><th align="center">Reset </th><th align="center">Name </th><th align="center">Definition  </th></tr>
<tr>
<td align="center">64 </td><td align="center">RO </td><td align="center">64h'0 </td><td align="center"><code>CSR_MEPC</code> </td><td align="center"><b>Machine mode exception program counter</b>. <br />
ISA offset 0x341. </td></tr>
</table>
<dl class="section user"><dt>Machine ISA Register (0x07880). ISA offset 0xf10.</dt><dd></dd></dl>
<table class="doxtable">
<tr>
<th align="left">Field Name</th><th align="center">Bits </th><th align="left">Description  </th></tr>
<tr>
<td align="left">Base (WARL)</td><td align="center">63:62 </td><td align="left"><b>Integer ISA width</b>: 1=32 bits; 2=64 bits; 3=128 bits. </td></tr>
<tr>
<td align="left">WIRI </td><td align="center">61:28 </td><td align="left">Reserved. </td></tr>
<tr>
<td align="left">Extension (WARL) </td><td align="center">27:0 </td><td align="left"><b>Supported ISA extensions</b>. See priviledge-isa datasheet. </td></tr>
</table>
<dl class="section user"><dt>Machine Vendor ID (0x07888). ISA offset 0xf11.</dt><dd></dd></dl>
<table class="doxtable">
<tr>
<th align="left">Field Name</th><th align="center">Bits </th><th align="left">Description  </th></tr>
<tr>
<td align="left">Vendor </td><td align="center">63:0 </td><td align="left"><b>Encoded manufacturer of the part</b>. </td></tr>
</table>
<dl class="section user"><dt>Machine Architecture ID Register (0x07890). ISA offset 0xf12.</dt><dd></dd></dl>
<table class="doxtable">
<tr>
<th align="left">Field Name</th><th align="center">Bits </th><th align="left">Description  </th></tr>
<tr>
<td align="left">Architecture ID </td><td align="center">63:0 </td><td align="left"><b>Encoded base microarchitecture of hart</b>. The combination mvendorid and marchid should uniquely identify the type of hart microarchitecture that is implemented. </td></tr>
</table>
<dl class="section user"><dt>Machine implementation ID Register (0x07898). ISA offset 0xf13.</dt><dd></dd></dl>
<table class="doxtable">
<tr>
<th align="left">Field Name</th><th align="center">Bits </th><th align="left">Description  </th></tr>
<tr>
<td align="left">Vendor </td><td align="center">63:0 </td><td align="left"><b>Encoded unique version of CPU implementation</b>. This register must be readable in any implementaion, but a value of 0 can be returned. </td></tr>
</table>
<dl class="section user"><dt>Hart ID Register (0x078A0). ISA offset 0xf13.</dt><dd></dd></dl>
<table class="doxtable">
<tr>
<th align="left">Field Name</th><th align="center">Bits </th><th align="left">Description  </th></tr>
<tr>
<td align="left">Vendor </td><td align="center">63:0 </td><td align="left"><b>Integer ID of hardware thread</b>. Hart IDs mightnot necessarily be numbered contiguously in a multiprocessor system, but at least one hart musthave a hart ID of zero. </td></tr>
</table>
<dl class="section user"><dt>Machine Status Register (0x01800). ISA offset 0x300.</dt><dd></dd></dl>
<table class="doxtable">
<tr>
<th align="left">Field Name</th><th align="center">Bits </th><th align="left">Description  </th></tr>
<tr>
<td align="left">SD </td><td align="center">63 </td><td align="left">Bit summarizes whether either the FS field or XS field signals the presence of some dirty state that will require saving extended user context to memory </td></tr>
<tr>
<td align="left">WPRI </td><td align="center">62:20 </td><td align="left">Reserved </td></tr>
<tr>
<td align="left">VM (WARL)</td><td align="center">28:24 </td><td align="left">Virtual addressing enable </td></tr>
<tr>
<td align="left">WPRI </td><td align="center">23:20 </td><td align="left">Reserved </td></tr>
<tr>
<td align="left">MXR </td><td align="center">19 </td><td align="left"><b>Make eXecutable Readable</b> </td></tr>
<tr>
<td align="left">PUM </td><td align="center">18 </td><td align="left"><b>Protect User Memory</b> bit modifies the privilege with which loads access virtual memory </td></tr>
<tr>
<td align="left">MPRV </td><td align="center">17 </td><td align="left">Privilege level at which loads and stores execute </td></tr>
<tr>
<td align="left">XS </td><td align="center">16:15 </td><td align="left">Context switch reducing flags: 0=All Off; 1=None dirty or clean, some on; 2=None dirty, some clean; 3=Some dirty </td></tr>
<tr>
<td align="left">FS </td><td align="center">14:13 </td><td align="left">Context switch reducing flags: 0=Off; 1=Initial; 2=Clean; 3=Dirty </td></tr>
<tr>
<td align="left">MPP </td><td align="center">12:11 </td><td align="left">Priviledge mode on MRET </td></tr>
<tr>
<td align="left">HPP </td><td align="center">10:9 </td><td align="left">Priviledge mode on HRET </td></tr>
<tr>
<td align="left">SPP </td><td align="center">8 </td><td align="left">Priviledge mode on SRET </td></tr>
<tr>
<td align="left">MPIE </td><td align="center">7 </td><td align="left">MIE prior to the trap </td></tr>
<tr>
<td align="left">HPIE </td><td align="center">6 </td><td align="left">HIE prior to the trap </td></tr>
<tr>
<td align="left">SPIE </td><td align="center">5 </td><td align="left">SIE prior to the trap </td></tr>
<tr>
<td align="left">UPIE </td><td align="center">4 </td><td align="left">UIE prior to the trap </td></tr>
<tr>
<td align="left">MIE </td><td align="center">3 </td><td align="left">Machine interrupt enable bit </td></tr>
<tr>
<td align="left">HIE </td><td align="center">2 </td><td align="left">Hypervisor interrupt enable bit </td></tr>
<tr>
<td align="left">SIE </td><td align="center">1 </td><td align="left">Super-user interrupt enable bit </td></tr>
<tr>
<td align="left">UIE </td><td align="center">0 </td><td align="left">User interrupt enable bit </td></tr>
</table>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
